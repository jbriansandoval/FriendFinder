<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Survey</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <style>
    body {background-color:skyblue;}
    h3   {color: teal;
          font-weight: 600;}
  </style>
</head>
<body>

<div class="container">
  
  <div class="jumbotron text-center">
    <h1>FriendFinder</h1>
    <h3>Please answer the questions below: </h3>
    <hr>
    <a href="/"><button type="button" class="btn btn-info btn-lg"><span class="glyphicon glyphicon-home"></span> Home</button></a>
  </div>

  <!-- Reservation Page -->
  <div class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title"><h2>Survey: </h2></div>
    </div>
    <div class="panel-body">
      <form role="form">

        <div class="form-group">
          <label for=""><h4>Name</h4></label>
          <input type="text" class="form-control" id="surveyName">
        </div>
        
        <div class="form-group">
          <label for=""><h4>Url Link to Profile Photo</h4></label>
          <input type="text" class="form-control" id="surveyPhoto">
        </div>
        <div class="form-group">

        <h3>Question 1</h3>
        <h4>How much do you like sushi?</h4>
        <select id="q1" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3>Question 2</h3>
        <h4>Do you like to exercise?</h4>
        <select id="q2" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>

        
        <h3>Question 3</h3>
        <h4>Do you stay like to wake up early?</h4>
        <select id="q3" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3>Question 4</h3>
        <h4>Do you enjoy going to the movies?</h4>
        <select id="q4" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question 5</h3>
        <h4>Do you like outdoors?</h4>
        <select id="q5" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question 6</h3>
        <h4>Do you like to read a book?</h4>
        <select id="q6" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question 7</h3>
        <h4>You like to eat seafood?</h4>
        <select id="q7" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question 8</h3>
        <h4>Politics are cool?</h4>
        <select id="q8" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question 9</h3>
        <h4>Traveling is something you want to do?</h4>
        <select id="q9" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question 10</h3>
        <h4>Its not me, it's you.</h4>
        <select id="q10" class="surveyQuestion">
          <option value="" selected disabled hidden>Select an option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </form>
    </div>
      <button type="submit" class="btn btn-info submit" id="add-btn">Submit</button>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <div class="col-lg-12">
        <a href="/api/friendslist">API Friends List</a>|
        <a href="">GitHub link</a>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h2>Best Match</h2>
            </div>
            <div class="modal-body">
                <!-- matching friend name -->
                <h2 id="matchName"></h2>
                <!-- matching friend image -->
                <img id="matchImage" src="" class="col-lg-12" alt="">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    
    </div>
</div>

</body>
</html>
<script type="text/javascript">
  // get new table info
  $("#add-btn").on("click", function(event) {
      event.preventDefault();
      // Form validation
      function validateForm() {
        var isValid = true;
      $(".form-control").each(function() {
          if ($(this).val() === "") {
              isValid = false;
          }
      });
      $(".surveyQuesiton").each(function() {
          if ($(this).val() === "") {
              isValid = false;
          }
      });
          return isValid;
      }
      // if all questions and from are filled the take inputs and do magic
      if (validateForm()) {
        var newFriend = {
          surveyName: $("#surveyName").val().trim(),
          surveyPhoto: $("#surveyPhoto").val().trim(),
          scores: [
            $("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("#q10").val()
          ]
        };
        clearInputs();
      // post/add new friend info to array
      $.post("/api/friendslist", newFriend, function(data) {
              // alert("Adding Friend...");
              // displaying data in modal
              $("#matchName").text(data.surveyName);
              $("#matchImage").attr("src", data.surveyPhoto);
              
              // display the modal after match is found
              $("#myModal").modal('show');
             
          });
      } else {
          alert("please fill out all forms, and answer all questions")
      }
  });
  // Clear form data function to reset all inputs
  function clearInputs(){
      $("#surveyName").val("");
      $("#surveyPhoto").val("");
      $("#q1").val("");
      $("#q2").val("");
      $("#q3").val("");
      $("#q4").val("");
      $("#q5").val("");
      $("#q6").val("");
      $("#q7").val("");
      $("#q8").val("");
      $("#q9").val("");
      $("#q10").val("");
  };
</script>